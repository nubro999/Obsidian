
## 1. **Boneh-Franklin Key Encapsulation (BLS12-381 기반)**

### 개념

- **Boneh-Franklin**은 대표적인 **Identity-Based Encryption (IBE)** 알고리즘입니다.
- Key Encapsulation Mechanism (KEM)으로도 활용되며,  
    여기서 KEM은 암호화된 키(세션키)를 안전하게 전달하는 방식입니다.
- **BLS12-381**은 최신 블록체인(예: 이더리움 2.0)에서 많이 쓰이는 강력한 쌍선형 곡선(elliptic curve)입니다.

### 동작 원리

1. **암호화 측**에서 BLS12-381 곡선을 이용해 임의의 세션키를 생성하고, 이를 수신자의 공개키로 암호화합니다.
2. **복호화 측**에서는 자신의 개인키로 암호화된 세션키를 복호화해 실제 데이터 암호화/복호화에 사용합니다.

---

## 2. **HMAC-256-CTR as the Data Encapsulation Mechanism (DEM)**

### 개념

- DEM(Data Encapsulation Mechanism)은 실제 데이터를 암호화/복호화하는 방법입니다.
- 여기서는 **HMAC-256-CTR**을 사용합니다.
    - **HMAC-256**: 해시 기반 메시지 인증 코드, SHA-256 해시 함수 사용
    - **CTR(Counter) Mode**: 블록 암호의 동작 모드 중 하나로, 병렬 처리가 가능하고 임의 길이 데이터 암호화에 적합

### 동작 원리

1. KEM에서 얻은 세션키를 사용해, HMAC-256 기반의 CTR 모드로 데이터를 암호화/복호화합니다.
2. CTR 모드는 블록 암호를 스트림 암호처럼 사용하게 해주며, HMAC은 데이터 무결성 검증에 활용됩니다.

---

## 3. **전체 프로세스 (복호화 기준)**

아래는 복호화(Decryption) 과정의 순서입니다:

1. **KEM 복호화** //키암호화
    
    - 수신자는 자신의 개인키로 KEM(즉, Boneh-Franklin over BLS12-381)에서 전달받은 암호화된 세션키를 복호화합니다.
    - 복호화된 세션키를 얻음.
2. **DEM 복호화** //data
    
    - 복호화된 세션키를 DEM(HMAC-256-CTR)에 입력하여, 암호화된 데이터를 복호화합니다.
    - 데이터의 무결성도 HMAC을 통해 확인할 수 있습니다.

---

## 4. **요약 그림 (텍스트)**

복사

`[암호화된 세션키] --(개인키로 KEM 복호화)--> [세션키] [암호화된 데이터] --(세션키로 DEM 복호화)--> [평문 데이터]`

---

## 5. **핵심 요점 정리**

- **KEM(Boneh-Franklin over BLS12-381):**  
    안전하게 세션키를 전달하는 역할.
- **DEM(HMAC-256-CTR):**  
    실제 데이터 암호화/복호화 및 무결성 검증.

이 방식은 **강력한 암호학적 보안**과 **데이터 무결성**을 동시에 제공합니다.