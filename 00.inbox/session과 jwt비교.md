
---

# 1. Session(세션) 기반 인증

## 1-1. 개념
- 서버가 **사용자 정보를 서버 메모리(또는 DB)에 저장**하고,  
  사용자는 세션 ID(쿠키 형태)를 통해 인증하는 방식

## 1-2. 생성 과정

1. **로그인 요청**  
   - 사용자가 아이디/비밀번호로 로그인 요청
2. **인증 성공**  
   - 서버가 사용자 정보를 확인하고, 인증에 성공하면 **고유한 세션 ID**를 생성
3. **세션 저장**  
   - 서버 메모리(혹은 Redis, DB 등)에 `세션ID <-> 사용자 정보`를 저장
4. **세션ID 발급**  
   - 서버가 세션ID를 **쿠키**에 담아 클라이언트에 전달
5. **이후 요청**  
   - 클라이언트는 쿠키(세션ID)를 자동으로 포함해 요청
   - 서버는 세션ID로 사용자를 식별

### 그림 요약

```
[클라이언트] --(로그인 정보)--> [서버]
[서버] --(세션ID 쿠키)--> [클라이언트]
[클라이언트] --(세션ID 쿠키)--> [서버]
[서버] --(세션 저장소에서 사용자 정보 조회)-->
```

---

# 2. JWT 토큰 기반 인증

## 2-1. 개념
- **서버가 사용자 정보를 암호화된 토큰(JWT)에 담아** 클라이언트에 전달
- 서버는 토큰을 저장하지 않고, **토큰 자체로 인증**을 처리

## 2-2. 생성 과정

1. **로그인 요청**  
   - 사용자가 아이디/비밀번호로 로그인 요청
2. **인증 성공**  
   - 서버가 사용자 정보를 확인하고,  
     **JWT 토큰을 생성** (payload에 사용자 정보, 만료시간 등 포함)
3. **JWT 토큰 발급**  
   - 서버가 JWT 토큰을 클라이언트에 전달 (주로 HTTP 헤더, 로컬스토리지, 쿠키 등)
4. **이후 요청**  
   - 클라이언트는 JWT 토큰을 HTTP 헤더(Authorization: Bearer ...)에 포함해 요청
   - 서버는 토큰의 서명을 검증하고, payload에서 사용자 정보 확인

### 그림 요약

```
[클라이언트] --(로그인 정보)--> [서버]
[서버] --(JWT 토큰)--> [클라이언트]
[클라이언트] --(JWT 토큰)--> [서버]
[서버] --(토큰 검증 및 사용자 정보 추출)-->
```

---

# 3. 주요 차이점

|        | Session 기반                   | JWT 기반                           |
|--------|-------------------------------|------------------------------------|
| 저장   | 서버에 세션정보 저장           | 서버는 토큰 저장 X                 |
| 확장성 | 서버가 많아지면 세션 공유 필요 | 서버 수평 확장에 유리              |
| 인증   | 세션ID로 사용자 식별           | 토큰 자체로 사용자 정보 확인       |
| 로그아웃/만료 | 서버에서 세션 삭제 가능        | 토큰 만료 전까지 유효(강제 만료 어려움) |

---

# 4. 예시 코드(간단화)

## 세션 생성 예시 (Spring Boot)

```java
@PostMapping("/login")
public String login(HttpSession session) {
    // 인증 성공 시
    session.setAttribute("userId", user.getId());
    return "로그인 성공";
}
```

## JWT 생성 예시 (Java, jjwt)

```java
String jwt = Jwts.builder()
    .setSubject(user.getId())
    .setExpiration(new Date(System.currentTimeMillis() + 3600000)) // 1시간
    .signWith(SignatureAlgorithm.HS256, secretKey)
    .compact();
```

---

# 5. 결론

- **세션**: 서버가 상태(세션)를 기억, 인증정보를 서버가 관리
- **JWT**: 서버가 상태를 기억하지 않고, 토큰(암호화된 정보) 자체로 인증

