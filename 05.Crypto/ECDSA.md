
# 1. **ECDSA란?**

- **ECDSA**(Elliptic Curve Digital Signature Algorithm)는  
    타원 곡선 암호학(ECC)을 이용한 디지털 서명 알고리즘입니다.
- **비트코인, 이더리움 등 블록체인**에서 널리 사용됩니다.

---

# 2. **secp256k1 곡선이란?**

- **secp256k1**은 ECDSA에서 사용되는 특정 타원 곡선의 이름입니다.
- "secp256k1"의 의미:
    - **secp**: Standards for Efficient Cryptography Prime
    - **256**: 256비트 보안
    - **k1**: 곡선 방정식의 계수(k 계열)
- **곡선 방정식**  
    $$
    y^2=x^3+7 (모듈로 소수 p, 즉 y^2≡x^3+7(mod p)y^2≡x^3+7(modp))
    $$
- **p**:  
    p=2256−232−977p=2256−232−977
- **기본점(G)**, **순환군의 차수(n)** 등 여러 파라미터가 정의되어 있습니다.


## **모듈로 소수 p (유한체 위의 연산)**

- 이더리움, 비트코인 등에서 사용하는 타원 곡선은 **유한체(특정 소수 pp로 나눈 나머지 연산)** 위에 정의됩니다.
- 즉, x와 y는 **정수**이지만,  
    모든 연산 결과는 소수 pp로 나눈 나머지로 계산합니다.

이를 수학적으로 쓰면:

y2≡x3+7(modp)y2≡x3+7(modp)

- 여기서 ≡≡는 "동치(modulo pp)"를 의미합니다.
- 즉, **x와 y의 값이 어떤 것이든**,  
- $$
    반드시 y^2을 p로 나눈 나머지와 x^3+7을 p로 나눈 나머지가 같아야 
    $$ 
    **곡선 위의 점**이 됩니다.

## **소수 p 값**

secp256k1에서 사용하는 pp는 아주 큰 소수입니다:

$p=2256−232−977p=2256−232−977$

이 값은 약 1.15×10771.15×1077로,  
매우 큰 수라서 사실상 "무작위처럼" 보안에 쓸 수 있습니다.


---

# 3. **ECDSA의 핵심 동작**

## (1) **키 생성**

- **비밀키 d**: 1 이상 n-1 이하의 임의의 정수
- **공개키 Q**:  
    Q=d⋅GQ=d⋅G (G는 곡선의 기본점, ⋅⋅는 스칼라 곱)

---

## (2) **서명(Signature) 생성**

메시지 m을 서명하는 과정:

1. 메시지 m의 해시값 h 계산 (h=keccak256(m)h=keccak256(m) 등)
2. 임의의 k 선택 (1 ≤ k < n)
3. 점 P = k·G 계산,  
    r = P의 x좌표   nmodn  
    (r = 0이면 다시)
4. s=k−1(h+d⋅r)  ns=k−1(h+d⋅r)modn (s = 0이면 다시)
5. **서명 결과**: (r, s)

---

## (3) **서명 검증**

1. 메시지 m의 해시값 h 계산
2. w=s−1  nw=s−1modn u1=h⋅w  nu1​=h⋅wmodn u2=r⋅w  nu2​=r⋅wmodn
3. P=u1⋅G+u2⋅QP=u1​⋅G+u2​⋅Q
4. r′=P의x좌표  nr′=P의x좌표modn
5. r′== rr′== r 이면 검증 성공

---

# 4. **정리**

- secp256k1은 **특정한 타원 곡선**의 이름
- ECDSA는 **해당 곡선을 이용해 서명/검증**하는 알고리즘
- **비밀키**는 임의의 정수,  
    **공개키**는 곡선 위의 점
- **서명**은 (r, s) 쌍,  
    **검증**은 공개키와 서명으로 메시지의 진위 확인

- Keccak은 SHA-3 표준의 원본 설계입니다.
- 하지만 **이더리움에서 사용하는 keccak256은 SHA-3(256)과 미묘하게 다릅니다.**
    - SHA-3(256)은 Keccak에 몇 가지 패딩 규칙을 추가한 표준 버전
    - 이더리움은 **오리지널 Keccak**(NIST 표준화 전)을 사용합니다.
- 그래서 이더리움의 keccak256과 표준 SHA3-256의 결과가 다를 수 있습니다.